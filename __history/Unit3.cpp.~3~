//---------------------------------------------------------------------------

#include <fmx.h>
#pragma hdrstop

#include "Unit1.h"
#include "Unit2.h"
#include "Unit3.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.fmx"
TForm3 *Form3;
//---------------------------------------------------------------------------
__fastcall TForm3::TForm3(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TForm3::FormResize(TObject *Sender)
{
	//Фиксируем месторасположение выпадающего меню
	Panel6->Position->X = Form3->Width - Panel6->Width - 20;

	//Позиционируем рисованные кнопки выпадающего меню
	ImgBtn1->Position->X = Panel1->Width - 46;
	ImgBtn1->Position->Y = 0;

	ImgBtn2->Position->X = ImgBtn1->Position->X;
	ImgBtn2->Position->Y = ImgBtn1->Position->Y;

	ImgBtn3->Position->X = Panel1->Width - 96;
	ImgBtn3->Position->Y = 0;

//---

	//Позиционируем кнопки перехода влево / вправо (вперед / назад)
	BtnLeft->Position->X = 0;
	BtnLeftPrs->Position->X = 0;
	BtnRight->Position->X = Rectangle1->Width - BtnRight->Width + 2;
	BtnRightPrs->Position->X = Rectangle1->Width - BtnRight->Width + 2;

	BtnLeft->Position->Y = Rectangle1->Height / 2 + 26;
	BtnLeftPrs->Position->Y = Rectangle1->Height / 2 + 26; //, где +24 - это чисто "подгон"
	BtnRight->Position->Y = Rectangle1->Height / 2 + 26;
	BtnRightPrs->Position->Y = Rectangle1->Height / 2 + 26;

	//Сдвигаем RoundRect, что бы на форме был виден как бы полукруг
	RoundRect1->Position->X = -38;
	RoundRect2->Position->X = -38;
	RoundRect1->Position->Y = Rectangle1->Height / 2;
	RoundRect2->Position->Y = Rectangle1->Height / 2;

	RoundRect3->Position->X = Rectangle1->Width - 38;
	RoundRect4->Position->X = Rectangle1->Width - 38; //, где -28 - это чисто "подгон"
	RoundRect3->Position->Y = Rectangle1->Height / 2;
	RoundRect4->Position->Y = Rectangle1->Height / 2;

//---

	//Позиционируем нижние Label'ы
	Label1->Width = Panel1->Width - ImgBtn1->Width - ImgBtn3->Width - Rectangle4->Width;

	Label2->Position->X = 0;
	Label3->Position->X = Label2->Width;

	Label4->Position->X = Panel2->Width - Label5->Width - Label4->Width;
	Label5->Position->X = Panel2->Width - Label5->Width;

	Label6->Position->X = 0;
	Label7->Position->X = Label6->Width;
}
//---------------------------------------------------------------------------

void __fastcall TForm3::FormClose(TObject *Sender, TCloseAction &Action)
{
//		Panel6->Visible = false;

		//Блок назначающий текст label'ам, которые отображают текст сравнения
//		FullName1->Text = buf1->Text;
//		FullName2->Text = buf1->Text;

		//Задаем базовый цвет, дающий знать что цвет не задан
//		Rectangle2->Fill->Color = MakeColor(9, 145, 167);
//		Rectangle3->Fill->Color = MakeColor(9, 145, 167);

//		ImgBtn3->Visible = false;

//		ImgBtn1->Visible = true;
//		ImgBtn2->Visible = false;
							 /*
		Form1->ListBox1->ItemIndex = -1;
		Form1->LB2_MainColors->ItemIndex = -1;
		Form1->LB3_RedColors->ItemIndex = -1;
		Form1->LB4_GreenColors->ItemIndex = -1;
		Form1->LB5_BlueColors->ItemIndex = -1;
		Form1->LB6_PinkColors->ItemIndex = -1;
		Form1->LB7_OrangeColors->ItemIndex = -1;
		Form1->LB8_YellowColors->ItemIndex = -1;
		Form1->LB9_VioletColors->ItemIndex = -1;
		Form1->LB10_BrownColors->ItemIndex = -1;
		Form1->LB11_WhiteColors->ItemIndex = -1;
		Form1->LB12_GreyColors->ItemIndex = -1; */
}
//---------------------------------------------------------------------------

void __fastcall TForm3::Button5Click(TObject *Sender)
{
//Занести цвет
	if(Button5->StyleLookup == "additembutton")
	{   	            //buf1->Text == "Сравнение не задано"
		if(FullName2->Text == buf1->Text && FullName1->Text != buf1->Text) //Блок проверяющий задан ли цвет
		{
			ImgBtn3->Visible = true; //Получается, если ЗАДАНы оба цвета, ТО отобразить кнопку
		}

		else //Если НЕТ, то скрыть
		{
			ImgBtn3->Visible = false;
		}

		Button5->StyleLookup = "deleteitembutton";
		FullName2->Text = Label1->Text;
		Rectangle3->Fill->Color = Rectangle1->Fill->Color;

		//Загружаем текст на Form4 для просомтра сравнений
		Form2->Label2->Text = Label1->Text; //Название
		Form2->Label6->Text = Label7->Text; //Name
		Form2->Label7->Text = Label3->Text;	//RGB
		Form2->Label8->Text = Label5->Text; //HTNL
	}

//Сбросить цвет
	else
	{                    //buf2->Text == "Не задан"
		if(FullName2->Text == buf1->Text && FullName1->Text != buf1->Text) //Блок проверяющий задан ли цвет
		{
			ImgBtn3->Visible = true; //Получается, если ЗАДАНы оба цвета, ТО отобразить кнопку
		}

		else //Если НЕТ, то скрыть
		{
			ImgBtn3->Visible = false;
		}

		FullName2->Visible = true;
		Button5->StyleLookup = "additembutton";
		Rectangle3->Fill->Color = MakeColor(9, 145, 167);

		FullName2->Text = buf1->Text;
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm3::ImgBtn1Click(TObject *Sender)
{
//Открываем панель
	if(Panel6->Visible == false)
	{
		//Блок назначающий текст label'ам, которые отображают текст сравнения
		FullName1->Text = buf1->Text;
		FullName1->Position->X = 8;
		FullName1->Position->Y = 0;

		FullName2->Text = buf1->Text;
		FullName2->Position->X = 8;
		FullName2->Position->Y = 0;

		//Ставим стрелочки в лево
		Button4->StyleLookup = "additembutton";
		Button5->StyleLookup = "additembutton";

		//Выравниваем панель меню и компоненты
		Panel6->Width = 185;
		Panel6->Position->X = Form3->Width - Panel6->Width - 20; //Делаем отступ от правого края

		Rectangle2->Width = 187;
		Rectangle2->Position->X = 0;
		Rectangle2->Fill->Color = MakeColor(9, 145, 167);

		Rectangle3->Width = 187;
		Rectangle3->Position->X = 0;
		Rectangle3->Fill->Color = MakeColor(9, 145, 167);

		//Делаем видимыми компоненты
		Panel6->Visible = true;
		FullName1->Visible = true;
		FullName2->Visible = true;

		ImgBtn1->Visible = false;
		ImgBtn2->Visible = true;
	}

//Убираем панель
	else
	{
		Panel6->Visible = false;

		//Блок назначающий текст label'ам, которые отображают текст сравнения
		FullName1->Text = buf1->Text;
		FullName2->Text = buf1->Text;

		//Задаем базовый цвет, дающий знать что цвет не задан
		Rectangle2->Fill->Color = MakeColor(9, 145, 167);
		Rectangle3->Fill->Color = MakeColor(9, 145, 167);

		ImgBtn3->Visible = false;

		ImgBtn1->Visible = true;
		ImgBtn2->Visible = false;
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm3::FormCreate(TObject *Sender)
{
//Выравниваем кнопки (картинки)
	ImgBtn1->Position->X = Panel1->Width - 46;
	ImgBtn1->Position->Y = 0;

	ImgBtn2->Position->X = ImgBtn1->Position->X;
	ImgBtn2->Position->Y = ImgBtn1->Position->Y;

	ImgBtn3->Position->X = Panel1->Width - 96;
	ImgBtn3->Position->Y = 0;

//Выравниваем Заголовки
	Label2->Position->X = 0;
	Label3->Position->X = Label2->Width;

	Label5->Position->X = Panel2->Width - Label5->Width;
	Label4->Position->X = Panel2->Width - Label5->Width - Label4->Width;

	Label6->Position->X = 0;
	Label7->Position->X = Label6->Width;
}
//---------------------------------------------------------------------------

void __fastcall TForm3::Button4Click(TObject *Sender)
{
//Занести цвет
	if(Button4->StyleLookup == "additembutton")
	{                   //buf2->Text == "Не задан"
		if(FullName1->Text == buf1->Text && FullName2->Text != buf1->Text) //Блок проверяющий задан ли цвет
		{
			ImgBtn3->Visible = true; //Получается, если ЗАДАНы оба цвета, ТО отобразить кнопку
		}

		else
		{
			ImgBtn3->Visible = false; //Если НЕТ, то скрыть
		}

		Button4->StyleLookup = "deleteitembutton";

		FullName1->Text = Label1->Text;

		Rectangle2->Fill->Color = Rectangle1->Fill->Color;

		//Загружаем текст на Form4 для просомтра сравнений
		Form2->Label1->Text = Label1->Text; //Название
		Form2->Label3->Text = Label7->Text; //Name
		Form2->Label4->Text = Label3->Text;	//RGB
		Form2->Label5->Text = Label5->Text; //HTNL
	}

//Сбросить цвет
	else
	{                   //buf2->Text == "Не задан"
		if(FullName1->Text == buf1->Text && FullName2->Text != buf1->Text) //Блок проверяющий задан ли цвет
		{
			ImgBtn3->Visible = true; //Получается, если ЗАДАНы оба цвета, ТО отобразить кнопку
		}

		else
		{
			ImgBtn3->Visible = false; //Если НЕТ, то скрыть
		}

		FullName1->Visible = true;
		Button4->StyleLookup = "additembutton";

		Rectangle2->Fill->Color = MakeColor(9, 145, 167);

		FullName1->Text = buf1->Text;
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm3::ImgBtn3Click(TObject *Sender)
{
	Form2->Rectangle1->Fill->Color = Rectangle2->Fill->Color;
	Form2->Rectangle2->Fill->Color = Rectangle3->Fill->Color;

	Form2->Show();
}
//---------------------------------------------------------------------------

void __fastcall TForm3::Timer1Timer(TObject *Sender)
{
//Делаем кнопку BtnLeft вновь НЕ нажатой
	RoundRect1->Visible = true;
	RoundRect2->Visible = false;
	BtnLeft->Visible = true;
	BtnLeftPrs->Visible = false;

	Timer1->Enabled = false;
}
//---------------------------------------------------------------------------

void __fastcall TForm3::Timer2Timer(TObject *Sender)
{
//Делаем кнопку BtnRight вновь НЕ нажатой
	RoundRect3->Visible = true;
	RoundRect4->Visible = false;
	BtnRight->Visible = true;
	BtnRightPrs->Visible = false;

	Timer2->Enabled = false;
}
//---------------------------------------------------------------------------

void __fastcall TForm3::BtnLeftClick(TObject *Sender)
{
//buf2->Text = buf2->Text.ToInt() - 1; -->> Уменьшаем текущее значение индекса buf2 на 1 (т.е. -1)
//И присваиваем ListBox, LB2...12, уже уменьшенное значение от текущего, что было
	if(Form1->ListBox1->Visible == true && buf2->Text.ToInt() > 0) //0 самый первый (нулевой) item
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->ListBox1->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB2_MainColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB2_MainColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB3_RedColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB3_RedColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB4_GreenColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB4_GreenColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB5_BlueColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB5_BlueColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB6_PinkColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB6_PinkColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB7_OrangeColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB7_OrangeColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB8_YellowColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB8_YellowColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB9_VioletColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB9_VioletColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB10_BrownColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB10_BrownColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB11_WhiteColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB11_WhiteColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB12_GreyColors->Visible == true && buf2->Text.ToInt() > 0)
	{
		buf2->Text = buf2->Text.ToInt() - 1;
		Form1->LB12_GreyColors->ItemIndex = buf2->Text.ToInt();
	}
//Делаем кнопку BtnLeft нажатой
	RoundRect1->Visible = false;
	RoundRect2->Visible = true;
	BtnLeft->Visible = false;
	BtnLeftPrs->Visible = true;

	Timer1->Enabled = true;
}
//---------------------------------------------------------------------------

void __fastcall TForm3::BtnRightClick(TObject *Sender)
{
//buf2->Text = buf2->Text.ToInt() + 1; -->> Увеличиваем текущее значение индекса buf2 на 1 (т.е. +1)
//И присваиваем ListBox, LB2...12, уже увеличенное значение от текущего, что было
	if(Form1->ListBox1->Visible == true && buf2->Text.ToInt() < Form1->ListBox1->Count -1) //-1 что бы не было перелиста на НЕ сущ. item
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->ListBox1->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB2_MainColors->Visible == true && buf2->Text.ToInt() < Form1->LB2_MainColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB2_MainColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB3_RedColors->Visible == true && buf2->Text.ToInt() < Form1->LB3_RedColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB3_RedColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB4_GreenColors->Visible == true && buf2->Text.ToInt() < Form1->LB4_GreenColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB4_GreenColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB5_BlueColors->Visible == true && buf2->Text.ToInt() < Form1->LB5_BlueColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB5_BlueColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB6_PinkColors->Visible == true && buf2->Text.ToInt() < Form1->LB6_PinkColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB6_PinkColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB7_OrangeColors->Visible == true && buf2->Text.ToInt() < Form1->LB7_OrangeColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB7_OrangeColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB8_YellowColors->Visible == true && buf2->Text.ToInt() < Form1->LB8_YellowColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB8_YellowColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB9_VioletColors->Visible == true && buf2->Text.ToInt() < Form1->LB9_VioletColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB9_VioletColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB10_BrownColors->Visible == true && buf2->Text.ToInt() < Form1->LB10_BrownColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB10_BrownColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB11_WhiteColors->Visible == true && buf2->Text.ToInt() < Form1->LB11_WhiteColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB11_WhiteColors->ItemIndex = buf2->Text.ToInt();
	}

	if(Form1->LB12_GreyColors->Visible == true && buf2->Text.ToInt() < Form1->LB12_GreyColors->Count -1)
	{
		buf2->Text = buf2->Text.ToInt() + 1;
		Form1->LB12_GreyColors->ItemIndex = buf2->Text.ToInt();
	}

//Делаем кнопку BtnRight нажатой
	RoundRect3->Visible = false;
	RoundRect4->Visible = true;
	BtnRight->Visible = false;
	BtnRightPrs->Visible = true;

	Timer2->Enabled = true;
}
//---------------------------------------------------------------------------

